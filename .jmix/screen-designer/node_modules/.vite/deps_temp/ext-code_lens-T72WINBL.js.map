{
  "version": 3,
  "sources": ["../../ace-builds/src-noconflict/ext-code_lens.js"],
  "sourcesContent": ["ace.define(\"ace/ext/code_lens\",[\"require\",\"exports\",\"module\",\"ace/line_widgets\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/editor\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar LineWidgets = require(\"../line_widgets\").LineWidgets;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\nfunction clearLensElements(renderer) {\n    var textLayer = renderer.$textLayer;\n    var lensElements = textLayer.$lenses;\n    if (lensElements)\n        lensElements.forEach(function (el) { el.remove(); });\n    textLayer.$lenses = null;\n}\nfunction renderWidgets(changes, renderer) {\n    var changed = changes & renderer.CHANGE_LINES\n        || changes & renderer.CHANGE_FULL\n        || changes & renderer.CHANGE_SCROLL\n        || changes & renderer.CHANGE_TEXT;\n    if (!changed)\n        return;\n    var session = renderer.session;\n    var lineWidgets = renderer.session.lineWidgets;\n    var textLayer = renderer.$textLayer;\n    var lensElements = textLayer.$lenses;\n    if (!lineWidgets) {\n        if (lensElements)\n            clearLensElements(renderer);\n        return;\n    }\n    var textCells = renderer.$textLayer.$lines.cells;\n    var config = renderer.layerConfig;\n    var padding = renderer.$padding;\n    if (!lensElements)\n        lensElements = textLayer.$lenses = [];\n    var index = 0;\n    for (var i = 0; i < textCells.length; i++) {\n        var row = textCells[i].row;\n        var widget = lineWidgets[row];\n        var lenses = widget && widget.lenses;\n        if (!lenses || !lenses.length)\n            continue;\n        var lensContainer = lensElements[index];\n        if (!lensContainer) {\n            lensContainer = lensElements[index]\n                = dom.buildDom([\"div\", { class: \"ace_codeLens\" }], renderer.container);\n        }\n        lensContainer.style.height = config.lineHeight + \"px\";\n        index++;\n        for (var j = 0; j < lenses.length; j++) {\n            var el = lensContainer.childNodes[2 * j];\n            if (!el) {\n                if (j != 0)\n                    lensContainer.appendChild(dom.createTextNode(\"\\xa0|\\xa0\"));\n                el = dom.buildDom([\"a\"], lensContainer);\n            }\n            el.textContent = lenses[j].title;\n            el.lensCommand = lenses[j];\n        }\n        while (lensContainer.childNodes.length > 2 * j - 1)\n            lensContainer.lastChild.remove();\n        var top = renderer.$cursorLayer.getPixelPosition({\n            row: row,\n            column: 0\n        }, true).top - config.lineHeight * widget.rowsAbove - config.offset;\n        lensContainer.style.top = top + \"px\";\n        var left = renderer.gutterWidth;\n        var indent = session.getLine(row).search(/\\S|$/);\n        if (indent == -1)\n            indent = 0;\n        left += indent * config.characterWidth;\n        lensContainer.style.paddingLeft = padding + left + \"px\";\n    }\n    while (index < lensElements.length)\n        lensElements.pop().remove();\n}\nfunction clearCodeLensWidgets(session) {\n    if (!session.lineWidgets)\n        return;\n    var widgetManager = session.widgetManager;\n    session.lineWidgets.forEach(function (widget) {\n        if (widget && widget.lenses)\n            widgetManager.removeLineWidget(widget);\n    });\n}\nexports.setLenses = function (session, lenses) {\n    var firstRow = Number.MAX_VALUE;\n    clearCodeLensWidgets(session);\n    lenses && lenses.forEach(function (lens) {\n        var row = lens.start.row;\n        var column = lens.start.column;\n        var widget = session.lineWidgets && session.lineWidgets[row];\n        if (!widget || !widget.lenses) {\n            widget = session.widgetManager.$registerLineWidget({\n                rowCount: 1,\n                rowsAbove: 1,\n                row: row,\n                column: column,\n                lenses: []\n            });\n        }\n        widget.lenses.push(lens.command);\n        if (row < firstRow)\n            firstRow = row;\n    });\n    session._emit(\"changeFold\", { data: { start: { row: firstRow } } });\n    return firstRow;\n};\nfunction attachToEditor(editor) {\n    editor.codeLensProviders = [];\n    editor.renderer.on(\"afterRender\", renderWidgets);\n    if (!editor.$codeLensClickHandler) {\n        editor.$codeLensClickHandler = function (e) {\n            var command = e.target.lensCommand;\n            if (!command)\n                return;\n            editor.execCommand(command.id, command.arguments);\n            editor._emit(\"codeLensClick\", e);\n        };\n        event.addListener(editor.container, \"click\", editor.$codeLensClickHandler, editor);\n    }\n    editor.$updateLenses = function () {\n        var session = editor.session;\n        if (!session)\n            return;\n        if (!session.widgetManager) {\n            session.widgetManager = new LineWidgets(session);\n            session.widgetManager.attach(editor);\n        }\n        var providersToWaitNum = editor.codeLensProviders.length;\n        var lenses = [];\n        editor.codeLensProviders.forEach(function (provider) {\n            provider.provideCodeLenses(session, function (err, payload) {\n                if (err)\n                    return;\n                payload.forEach(function (lens) {\n                    lenses.push(lens);\n                });\n                providersToWaitNum--;\n                if (providersToWaitNum == 0) {\n                    applyLenses();\n                }\n            });\n        });\n        function applyLenses() {\n            var cursor = session.selection.cursor;\n            var oldRow = session.documentToScreenRow(cursor);\n            var scrollTop = session.getScrollTop();\n            var firstRow = exports.setLenses(session, lenses);\n            var lastDelta = session.$undoManager && session.$undoManager.$lastDelta;\n            if (lastDelta && lastDelta.action == \"remove\" && lastDelta.lines.length > 1)\n                return;\n            var row = session.documentToScreenRow(cursor);\n            var lineHeight = editor.renderer.layerConfig.lineHeight;\n            var top = session.getScrollTop() + (row - oldRow) * lineHeight;\n            if (firstRow == 0 && scrollTop < lineHeight / 4 && scrollTop > -lineHeight / 4) {\n                top = -lineHeight;\n            }\n            session.setScrollTop(top);\n        }\n    };\n    var updateLenses = lang.delayedCall(editor.$updateLenses);\n    editor.$updateLensesOnInput = function () {\n        updateLenses.delay(250);\n    };\n    editor.on(\"input\", editor.$updateLensesOnInput);\n}\nfunction detachFromEditor(editor) {\n    editor.off(\"input\", editor.$updateLensesOnInput);\n    editor.renderer.off(\"afterRender\", renderWidgets);\n    if (editor.$codeLensClickHandler)\n        editor.container.removeEventListener(\"click\", editor.$codeLensClickHandler);\n}\nexports.registerCodeLensProvider = function (editor, codeLensProvider) {\n    editor.setOption(\"enableCodeLens\", true);\n    editor.codeLensProviders.push(codeLensProvider);\n    editor.$updateLensesOnInput();\n};\nexports.clear = function (session) {\n    exports.setLenses(session, null);\n};\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableCodeLens: {\n        set: function (val) {\n            if (val) {\n                attachToEditor(this);\n            }\n            else {\n                detachFromEditor(this);\n            }\n        }\n    }\n});\ndom.importCssString(\"\\n.ace_codeLens {\\n    position: absolute;\\n    color: #aaa;\\n    font-size: 88%;\\n    background: inherit;\\n    width: 100%;\\n    display: flex;\\n    align-items: flex-end;\\n    pointer-events: none;\\n}\\n.ace_codeLens > a {\\n    cursor: pointer;\\n    pointer-events: auto;\\n}\\n.ace_codeLens > a:hover {\\n    color: #0000ff;\\n    text-decoration: underline;\\n}\\n.ace_dark > .ace_codeLens > a:hover {\\n    color: #4e94ce;\\n}\\n\", \"codelense.css\", false);\n\n});                (function() {\n                    ace.require([\"ace/ext/code_lens\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],
  "mappings": ";;;;;AAAA;AAAA;AAAA,QAAI,OAAO,qBAAoB,CAAC,WAAU,WAAU,UAAS,oBAAmB,iBAAgB,gBAAe,eAAc,cAAa,YAAY,GAAG,SAASA,UAASC,UAASC,SAAO;AAAC;AAC5L,UAAI,cAAcF,SAAQ,iBAAiB,EAAE;AAC7C,UAAI,QAAQA,SAAQ,cAAc;AAClC,UAAI,OAAOA,SAAQ,aAAa;AAChC,UAAI,MAAMA,SAAQ,YAAY;AAC9B,eAAS,kBAAkB,UAAU;AACjC,YAAI,YAAY,SAAS;AACzB,YAAI,eAAe,UAAU;AAC7B,YAAI;AACA,uBAAa,QAAQ,SAAU,IAAI;AAAE,eAAG,OAAO;AAAA,UAAG,CAAC;AACvD,kBAAU,UAAU;AAAA,MACxB;AACA,eAAS,cAAc,SAAS,UAAU;AACtC,YAAI,UAAU,UAAU,SAAS,gBAC1B,UAAU,SAAS,eACnB,UAAU,SAAS,iBACnB,UAAU,SAAS;AAC1B,YAAI,CAAC;AACD;AACJ,YAAI,UAAU,SAAS;AACvB,YAAI,cAAc,SAAS,QAAQ;AACnC,YAAI,YAAY,SAAS;AACzB,YAAI,eAAe,UAAU;AAC7B,YAAI,CAAC,aAAa;AACd,cAAI;AACA,8BAAkB,QAAQ;AAC9B;AAAA,QACJ;AACA,YAAI,YAAY,SAAS,WAAW,OAAO;AAC3C,YAAI,SAAS,SAAS;AACtB,YAAI,UAAU,SAAS;AACvB,YAAI,CAAC;AACD,yBAAe,UAAU,UAAU,CAAC;AACxC,YAAI,QAAQ;AACZ,iBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AACvC,cAAI,MAAM,UAAU,CAAC,EAAE;AACvB,cAAI,SAAS,YAAY,GAAG;AAC5B,cAAI,SAAS,UAAU,OAAO;AAC9B,cAAI,CAAC,UAAU,CAAC,OAAO;AACnB;AACJ,cAAI,gBAAgB,aAAa,KAAK;AACtC,cAAI,CAAC,eAAe;AAChB,4BAAgB,aAAa,KAAK,IAC5B,IAAI,SAAS,CAAC,OAAO,EAAE,OAAO,eAAe,CAAC,GAAG,SAAS,SAAS;AAAA,UAC7E;AACA,wBAAc,MAAM,SAAS,OAAO,aAAa;AACjD;AACA,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,gBAAI,KAAK,cAAc,WAAW,IAAI,CAAC;AACvC,gBAAI,CAAC,IAAI;AACL,kBAAI,KAAK;AACL,8BAAc,YAAY,IAAI,eAAe,KAAW,CAAC;AAC7D,mBAAK,IAAI,SAAS,CAAC,GAAG,GAAG,aAAa;AAAA,YAC1C;AACA,eAAG,cAAc,OAAO,CAAC,EAAE;AAC3B,eAAG,cAAc,OAAO,CAAC;AAAA,UAC7B;AACA,iBAAO,cAAc,WAAW,SAAS,IAAI,IAAI;AAC7C,0BAAc,UAAU,OAAO;AACnC,cAAI,MAAM,SAAS,aAAa,iBAAiB;AAAA,YAC7C;AAAA,YACA,QAAQ;AAAA,UACZ,GAAG,IAAI,EAAE,MAAM,OAAO,aAAa,OAAO,YAAY,OAAO;AAC7D,wBAAc,MAAM,MAAM,MAAM;AAChC,cAAI,OAAO,SAAS;AACpB,cAAI,SAAS,QAAQ,QAAQ,GAAG,EAAE,OAAO,MAAM;AAC/C,cAAI,UAAU;AACV,qBAAS;AACb,kBAAQ,SAAS,OAAO;AACxB,wBAAc,MAAM,cAAc,UAAU,OAAO;AAAA,QACvD;AACA,eAAO,QAAQ,aAAa;AACxB,uBAAa,IAAI,EAAE,OAAO;AAAA,MAClC;AACA,eAAS,qBAAqB,SAAS;AACnC,YAAI,CAAC,QAAQ;AACT;AACJ,YAAI,gBAAgB,QAAQ;AAC5B,gBAAQ,YAAY,QAAQ,SAAU,QAAQ;AAC1C,cAAI,UAAU,OAAO;AACjB,0BAAc,iBAAiB,MAAM;AAAA,QAC7C,CAAC;AAAA,MACL;AACA,MAAAC,SAAQ,YAAY,SAAU,SAAS,QAAQ;AAC3C,YAAI,WAAW,OAAO;AACtB,6BAAqB,OAAO;AAC5B,kBAAU,OAAO,QAAQ,SAAU,MAAM;AACrC,cAAI,MAAM,KAAK,MAAM;AACrB,cAAI,SAAS,KAAK,MAAM;AACxB,cAAI,SAAS,QAAQ,eAAe,QAAQ,YAAY,GAAG;AAC3D,cAAI,CAAC,UAAU,CAAC,OAAO,QAAQ;AAC3B,qBAAS,QAAQ,cAAc,oBAAoB;AAAA,cAC/C,UAAU;AAAA,cACV,WAAW;AAAA,cACX;AAAA,cACA;AAAA,cACA,QAAQ,CAAC;AAAA,YACb,CAAC;AAAA,UACL;AACA,iBAAO,OAAO,KAAK,KAAK,OAAO;AAC/B,cAAI,MAAM;AACN,uBAAW;AAAA,QACnB,CAAC;AACD,gBAAQ,MAAM,cAAc,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,SAAS,EAAE,EAAE,CAAC;AAClE,eAAO;AAAA,MACX;AACA,eAAS,eAAe,QAAQ;AAC5B,eAAO,oBAAoB,CAAC;AAC5B,eAAO,SAAS,GAAG,eAAe,aAAa;AAC/C,YAAI,CAAC,OAAO,uBAAuB;AAC/B,iBAAO,wBAAwB,SAAU,GAAG;AACxC,gBAAI,UAAU,EAAE,OAAO;AACvB,gBAAI,CAAC;AACD;AACJ,mBAAO,YAAY,QAAQ,IAAI,QAAQ,SAAS;AAChD,mBAAO,MAAM,iBAAiB,CAAC;AAAA,UACnC;AACA,gBAAM,YAAY,OAAO,WAAW,SAAS,OAAO,uBAAuB,MAAM;AAAA,QACrF;AACA,eAAO,gBAAgB,WAAY;AAC/B,cAAI,UAAU,OAAO;AACrB,cAAI,CAAC;AACD;AACJ,cAAI,CAAC,QAAQ,eAAe;AACxB,oBAAQ,gBAAgB,IAAI,YAAY,OAAO;AAC/C,oBAAQ,cAAc,OAAO,MAAM;AAAA,UACvC;AACA,cAAI,qBAAqB,OAAO,kBAAkB;AAClD,cAAI,SAAS,CAAC;AACd,iBAAO,kBAAkB,QAAQ,SAAU,UAAU;AACjD,qBAAS,kBAAkB,SAAS,SAAU,KAAK,SAAS;AACxD,kBAAI;AACA;AACJ,sBAAQ,QAAQ,SAAU,MAAM;AAC5B,uBAAO,KAAK,IAAI;AAAA,cACpB,CAAC;AACD;AACA,kBAAI,sBAAsB,GAAG;AACzB,4BAAY;AAAA,cAChB;AAAA,YACJ,CAAC;AAAA,UACL,CAAC;AACD,mBAAS,cAAc;AACnB,gBAAI,SAAS,QAAQ,UAAU;AAC/B,gBAAI,SAAS,QAAQ,oBAAoB,MAAM;AAC/C,gBAAI,YAAY,QAAQ,aAAa;AACrC,gBAAI,WAAWA,SAAQ,UAAU,SAAS,MAAM;AAChD,gBAAI,YAAY,QAAQ,gBAAgB,QAAQ,aAAa;AAC7D,gBAAI,aAAa,UAAU,UAAU,YAAY,UAAU,MAAM,SAAS;AACtE;AACJ,gBAAI,MAAM,QAAQ,oBAAoB,MAAM;AAC5C,gBAAI,aAAa,OAAO,SAAS,YAAY;AAC7C,gBAAI,MAAM,QAAQ,aAAa,KAAK,MAAM,UAAU;AACpD,gBAAI,YAAY,KAAK,YAAY,aAAa,KAAK,YAAY,CAAC,aAAa,GAAG;AAC5E,oBAAM,CAAC;AAAA,YACX;AACA,oBAAQ,aAAa,GAAG;AAAA,UAC5B;AAAA,QACJ;AACA,YAAI,eAAe,KAAK,YAAY,OAAO,aAAa;AACxD,eAAO,uBAAuB,WAAY;AACtC,uBAAa,MAAM,GAAG;AAAA,QAC1B;AACA,eAAO,GAAG,SAAS,OAAO,oBAAoB;AAAA,MAClD;AACA,eAAS,iBAAiB,QAAQ;AAC9B,eAAO,IAAI,SAAS,OAAO,oBAAoB;AAC/C,eAAO,SAAS,IAAI,eAAe,aAAa;AAChD,YAAI,OAAO;AACP,iBAAO,UAAU,oBAAoB,SAAS,OAAO,qBAAqB;AAAA,MAClF;AACA,MAAAA,SAAQ,2BAA2B,SAAU,QAAQ,kBAAkB;AACnE,eAAO,UAAU,kBAAkB,IAAI;AACvC,eAAO,kBAAkB,KAAK,gBAAgB;AAC9C,eAAO,qBAAqB;AAAA,MAChC;AACA,MAAAA,SAAQ,QAAQ,SAAU,SAAS;AAC/B,QAAAA,SAAQ,UAAU,SAAS,IAAI;AAAA,MACnC;AACA,UAAI,SAASD,SAAQ,WAAW,EAAE;AAClC,MAAAA,SAAQ,WAAW,EAAE,cAAc,OAAO,WAAW,UAAU;AAAA,QAC3D,gBAAgB;AAAA,UACZ,KAAK,SAAU,KAAK;AAChB,gBAAI,KAAK;AACL,6BAAe,IAAI;AAAA,YACvB,OACK;AACD,+BAAiB,IAAI;AAAA,YACzB;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ,CAAC;AACD,UAAI,gBAAgB,6aAA6a,iBAAiB,KAAK;AAAA,IAEvd,CAAC;AAAkB,KAAC,WAAW;AACX,UAAI,QAAQ,CAAC,mBAAmB,GAAG,SAAS,GAAG;AAC3C,YAAI,OAAO,UAAU,YAAY,OAAO,WAAW,YAAY,QAAQ;AACnE,iBAAO,UAAU;AAAA,QACrB;AAAA,MACJ,CAAC;AAAA,IACL,GAAG;AAAA;AAAA;",
  "names": ["require", "exports", "module"]
}
